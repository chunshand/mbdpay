import axios from"axios";import md5 from"md5";function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,a,r){return a&&_defineProperties(e.prototype,a),r&&_defineProperties(e,r),e}var mbd_url_config={wx_prepay:"https://api.mianbaoduo.com/release/wx/prepay",alipay_pay:"https://api.mianbaoduo.com/release/alipay/pay",refund:"https://api.mianbaoduo.com/release/main/refund",search_order:"https://api.mianbaoduo.com/release/main/search_order",openid:"https://mbd.pub/openid"};function ksort(a){var r={},e=Object.keys(a);return e.sort(),e.forEach(function(e){r[e]=a[e]}),r}var MbdPay=function(){function r(e,a){_classCallCheck(this,r),this.app_id=e,this.app_key=a}return _createClass(r,[{key:"wx_js_prepay",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.app_id=this.app_id;var a=r.CreateSign(e,this.app_key);return e.sign=a,axios.post(mbd_url_config.wx_prepay,e)}},{key:"wx_h5_prepay",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.app_id=this.app_id,e.channel="h5";var a=r.CreateSign(e,this.app_key);return e.sign=a,axios.post(mbd_url_config.wx_prepay,e)}},{key:"alipay_pay",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.app_id=this.app_id;var a=r.CreateSign(e,this.app_key);return e.sign=a,axios.post(mbd_url_config.alipay_pay,e)}},{key:"refund",value:function(e){var a={};a.app_id=this.app_id,a.order_id=e;e=r.CreateSign(a,this.app_key);return a.sign=e,axios.post(mbd_url_config.refund,a)}},{key:"search_order",value:function(e){var a={};a.app_id=this.app_id,a.order_id=e;e=r.CreateSign(a,this.app_key);return a.sign=e,axios.post(mbd_url_config.search_order,a)}},{key:"openid",value:function(e){var a={};a.app_id=this.app_id,a.target_url=e;e=r.CreateSign(a,this.app_key);return a.sign=e,axios.get(mbd_url_config.openid,a)}}],[{key:"CreateSign",value:function(e,a){var r,i="";for(r in e=ksort(e))i+=r+"="+e[r]+"&";return i=i+"key="+a,console.log(i),i=md5(decodeURI(i))}}]),r}();export default MbdPay;
